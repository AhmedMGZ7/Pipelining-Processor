library ieee;
use ieee.STD_LOGIC_1164.all;
use ieee.numeric_std.all;


entity ALU is
    generic (n :integer := 32);
    port (
        rsrc, rdst, inport, shift_amount : in std_logic_vector(n-1 downto 0);
        opCode: in std_logic_vector (5 downto 0);
        result,sp_new : out std_logic_vector (n-1 downto 0);
        fcout, fneg, fzero: out std_logic
    ) ;
end ALU;

architecture ALUarc of ALU is
    begin

      -- calculating the result
      result <= (others => '0' ) when (opCode(5 downto 0) = "000000") -- NOP
      else (others => '0' ) when (opCode(5 downto 0) = "000001") -- setC
      else (others => '0' ) when (opCode(5 downto 0) = "000010") -- CLRC
      else (others => '0' ) when (opCode(5 downto 0) = "001111") -- CLR rdst
      else (not(rdst)) when (opCode(5 downto 0) = "000100") -- NOT rdst
      else (rdst+1) when (opCode(5 downto 0) = "000101") -- inc rdst
      else (rdst-1) when (opCode(5 downto 0) = "000110") -- dec rdst
      else (rdst) when (opCode(5 downto 0) = "000111") -- NEG rdst
      else (rdst) when (opCode(5 downto 0) = "001000") -- OUT rdst
      else (rdst) when (opCode(5 downto 0) = "001101") -- IN rdst
      else (rdst) when (opCode(5 downto 0) = "010000") -- MOV rdst
      else (rdst) when (opCode(5 downto 0) = "010010") -- Add rdst
      else (rdst) when (opCode(5 downto 0) = "010100") -- SUB rdst
      else (rdst) when (opCode(5 downto 0) = "010110") -- AND rdst
      else (rdst) when (opCode(5 downto 0) = "011000") -- OR rdst
      else (rdst) when (opCode(5 downto 0) = "011010") -- IAdd rdst
      else (rdst) when (opCode(5 downto 0) = "011100") -- SHL rdst
      else (rdst) when (opCode(5 downto 0) = "011110") -- SHR rdst
      else (rdst) when (opCode(5 downto 0) = "001010") -- RLC rdst
      else (rdst) when (opCode(5 downto 0) = "001011") -- RRC rdst
      else (rdst) when (opCode(5 downto 0) = "100000") -- push rdst
      else (rdst) when (opCode(5 downto 0) = "100010") -- pop rdst
      else (rdst) when (opCode(5 downto 0) = "100100") -- LDM rdst
      else (rdst) when (opCode(5 downto 0) = "100110") -- LDD rdst
      else (rdst) when (opCode(5 downto 0) = "101000") -- STD rdst
      else (others => '0');




      
end architecture;